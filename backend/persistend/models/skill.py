# =============================================================================
# ФАЙЛ: backend/persistend/models/skill.py
# КРАТКО: ORM-модель таблицы "skill" (навыки) для работы с БД через SQLAlchemy.
# ЗАЧЕМ:
#   • Хранить справочник навыков (например: "python", "docker", "kafka").
#   • Давать приложению типобезопасный доступ к данным (ORM вместо «сырого» SQL).
#   • Автоматически проставлять created_at/updated_at через TimestampMixin.
#
# ЕСЛИ ВЫ ВПЕРВЫЕ В БЭКЕНДЕ/БД:
#   • «Модель» = обычный Python-класс, который описывает таблицу в БД.
#   • Поля класса = столбцы таблицы (тип, ключ, ограничения).
#   • SQLAlchemy берёт эти описания и строит SQL-запросы за вас.
# =============================================================================

from __future__ import annotations  # Позволяет использовать аннотации типов без проблем с порядком определения

# DeclarativeBase — «база» для ORM-моделей, Mapped/mapped_column — типы/функции для описания столбцов
from sqlalchemy.orm import DeclarativeBase, Mapped, mapped_column

# Типы данных. Text — текст произвольной длины, TIMESTAMP — дата/время (ниже не используется напрямую —
# метки времени обычно приходят из миксина TimestampMixin)
from sqlalchemy import Text, TIMESTAMP

# func — доступ к SQL-функциям СУБД (например, NOW()). В этом файле напрямую не используется,
# но часто пригождается (оставляем импорт как подсказку для будущих полей).
from sqlalchemy.sql import func

# Подключаем наш общий Base и миксин с таймстемпами:
#   Base — общий «родитель» для всех моделей (он уже настроен где-то в вашем проекте).
#   TimestampMixin — обычно добавляет столбцы created_at и updated_at с автозаполнением.
from backend.persistend.base import Base, TimestampMixin

# -----------------------------------------------------------------------------
# МОДЕЛЬ ТАБЛИЦЫ SKILL
# -----------------------------------------------------------------------------
class Skill(Base, TimestampMixin):
    """
    ORM-модель для таблицы «skill».
    Каждая строка = один навык (например, slug="python", name="Python").
    TimestampMixin (родительский класс) добавит created_at/updated_at.
    """
    __tablename__ = "skill"  # Явно задаём имя таблицы в БД (по умолчанию SQLAlchemy берёт имя класса в нижнем регистре)

    # id — первичный ключ (уникальный идентификатор строки).
    # mapped_column описывает столбец: primary_key=True — делаем его PK,
    # autoincrement=True — база сама увеличивает значение (1,2,3,...).
    id: Mapped[int] = mapped_column(primary_key=True, autoincrement=True)

    # slug — короткое машинно-читаемое имя навыка (обычно в нижнем регистре и без пробелов).
    # Здесь тип Text (произвольная длина). Часто его делают уникальным и not null,
    # чтобы не было дубликатов («python» один раз на всю таблицу).
    # Пример значения: "python", "gitlab-ci", "kafka".
    slug: Mapped[str] = mapped_column(Text)

    # name — «человеческое» имя навыка. Может совпадать со slug по смыслу, но формат свободнее
    # (например, "Python" с заглавной буквы). Часто тоже делают уникальным, чтобы не плодить дубликаты.
    name: Mapped[str] = mapped_column(Text)

